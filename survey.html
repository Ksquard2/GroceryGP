<!DOCTYPE html>
<html>
 <head>
    <title>page 1</title>
 </head>
 <body>
  
    <form id = "form">
    <label>Name: <input type = "text" id="name"></label>
      <h4>Protien:</h4>
        <input type="checkbox" value="Chicken">
        <input type="checkbox" value="Beef">
        <input type="checkbox" value="Fish">
        <input type="checkbox" value="Beans">
        <p>Chicken Beef Fish Beans</p>
        <h4>Veggies:</h4>
        <input type="checkbox" value="Broccoli">
        <input type="checkbox" value="Carrots">
        <input type="checkbox" value="Lettuce">
        <input type="checkbox" value="Tomatos">
        <p>Broccoli Carrots Lettuce Tomatos</p>
        <h4>Carbohydrates:</h4>
        <input type="checkbox" value="Potatos">
        <input type="checkbox" value="Bread">
        <input type="checkbox" value="Pasta">
        <input type="checkbox" value="Rice">
        <p>Potatos Bread Pasta Rice</p>
      <button type="submit">Submit</button>
    </form>
    <p id = "noSelect"></p>
    <p id = "noName"></p>
<script>
    let foodGroups = [];
    
    // Add event listeners to all checkboxes
    document.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
        checkbox.addEventListener('change', function() {
            if (this.checked) {
                foodGroups.push(this.value);
            } else {
                // Remove from array when unchecked
                foodGroups = foodGroups.filter(value => value !== this.value);
            }
            console.log("Current selections:", foodGroups);
        });
    });
    form = document.getElementById("form")
    form.addEventListener('submit',(event) =>{
        event.preventDefault();
        if (foodGroups.length > 0 && document.getElementById("name").value.length > 0) {
            if (typeof(Storage) !== "undefined") {
                //Gathers survey data
                localStorage.setItem("name", document.getElementById("name").value);
                localStorage.setItem("foodGroups", foodGroups)
                //sends to the purchasing page
                location.href = "purchasing.html"
            }
        } 
        else
        {
            if(foodGroups.length == 0){
                document.getElementById("noSelect").innerHTML = "Please pick a food"
            }
            if(document.getElementById("name").value.length == 0){
                document.getElementById("noName").innerHTML = "Please pick your name"
            }
        }
    }); 
</script>
 </body>
</html>